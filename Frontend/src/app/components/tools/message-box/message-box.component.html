<div class="chat_message_cont">
  <div class="message_header">
    <div *ngIf="friendInfo.length > 0" class="left_col">
      <div class="img_box">
        <img [src]="friendInfo[0]?.img" alt="" />
      </div>
      <div class="friend_info_box">
        <h2>{{ friendInfo[0]?.name }}</h2>
        <div>
          @if(friendInfo[0]?.status){
          <span class="online"></span>
          <p>online</p>
          }@else {
          <span class="offline"></span>
          <p>offline</p>
          }
        </div>
      </div>
    </div>
    <div class="right_col">
      <i class="fa-solid fa-video"></i>
      <i class="fa-solid fa-gears"></i>
    </div>
  </div>
  <div class="message_box" #messageContainer>
    <div *ngFor="let message of messagesArray">
      @if(message.senderId=== user?._id){
      <div class="user_message">
        @if (message.status==='sent') {
        <div class="message">
          <h4>{{ message.name }}</h4>
          <div class="message_info">
            <p>
              {{ message.message }}
            </p>
            <div class="time_status">
              <strong>{{ message.time | date : "HH:mm" }}</strong>
              <strong style="color: rgba(54, 170, 54, 0.811)">{{
                message.status
              }}</strong>
            </div>
          </div>
        </div>
        }@else{
        <div style="opacity: 0.7" class="pending_message message">
          <h4>{{ message.name }}</h4>
          <div class="message_info">
            <p>{{ message.message }}</p>
            <div class="time_status" style="justify-content: end">
              <strong style="color: #962996; font-size: 0.75rem">{{
                message.status
              }}</strong>
            </div>
          </div>
        </div>
        }
      </div>

      }@else {
      <div class="friend_message">
        @if (message.status==='sent') {
        <div class="message">
          <h4>{{ message.name }}</h4>
          <div class="message_info">
            <p>
              {{ message.message }}
            </p>
            <div class="time_status">
              <strong>{{ message.time | date : "HH:mm" }}</strong>
              <strong style="color: rgba(54, 170, 54, 0.811)">{{
                message.status
              }}</strong>
            </div>
          </div>
        </div>
        }@else{
        <div style="opacity: 0.7" class="pending_message message">
          <h4>{{ message.name }}</h4>
          <div class="message_info">
            <p>{{ message.message }}</p>

            <div class="time_status" style="justify-content: end">
              <strong style="color: #962996; font-size: 0.75rem">{{
                message.status
              }}</strong>
            </div>
          </div>
        </div>
        }
      </div>
      }
    </div>
  </div>
  <div class="message_inputs">
    <div class="left_col">
      <input
        [(ngModel)]="messageText"
        type="text"
        placeholder="type something"
        (keydown.enter)="sendMessageClick(messageText)"
      />
      <div>
        <button>
          <!-- <input
            style="display: none"
            type="file"
            accept="image/png, image/gif, image/jpeg,  image/jpg, image/webp"
            (change)="openFilesClick($event)"
            id="ImageAdd"
          /> 
           <label for="ImageAdd">
            <i class="fa-solid fa-paperclip"></i>
          </label> -->
          <uc-config
            ctx-name="my-uploader"
            source-list="local, url, camera, dropbox"
            pubkey="84fcad5ca1a7445d58ed"
            use-cloud-image-editor="true"
          ></uc-config>

          <uc-file-uploader-regular
            style="
              position: absolute;
              opacity: 0;
              transform: rotateZ(90deg);
              right: 150px;
              bottom: -20px;
            "
            ctx-name="my-uploader"
            class="uc-light"
          ></uc-file-uploader-regular>

          <uc-upload-ctx-provider #ctxProvider ctx-name="my-uploader">
          </uc-upload-ctx-provider>

          <label>
            <i class="fa-solid fa-paperclip"></i>
          </label>
        </button>
        <button class="amoji_btn">
          <i
            (click)="emojiOpenClick()"
            class="fa-regular fa-face-smile-beam"
          ></i>
          @if(isEmojiClickOpened){
          <div class="EmojiBox">
            <p
              (click)="emojiClick(emoji)"
              *ngFor="let emoji of emojiArr"
              [innerHTML]="emoji.htmlCodes[0]"
            ></p>
          </div>
          }
        </button>
      </div>
    </div>
    <div class="right_col">
      <button
        [disabled]="messageText === ''"
        (click)="sendMessageClick(messageText)"
      >
        <i class="fa-solid fa-paper-plane"></i>
      </button>
    </div>
  </div>
</div>
<!-- <div *ngIf="uploadedImageUrl">
  <img [src]="uploadedImageUrl" alt="Uploaded Image" style="max-width: 100%" />
</div> -->
